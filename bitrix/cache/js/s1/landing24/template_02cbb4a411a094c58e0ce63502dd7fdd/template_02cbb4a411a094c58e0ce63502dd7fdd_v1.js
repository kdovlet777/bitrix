
; /* Start:"a:4:{s:4:"full";s:87:"/bitrix/components/bitrix/landing.start/templates/.default/script.min.js?16953020751426";s:6:"source";s:68:"/bitrix/components/bitrix/landing.start/templates/.default/script.js";s:3:"min";s:72:"/bitrix/components/bitrix/landing.start/templates/.default/script.min.js";s:3:"map";s:72:"/bitrix/components/bitrix/landing.start/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");BX.Landing.PaymentAlert=function(n){if(typeof n.nodes==="undefined"){return}for(var t=0,e=n.nodes.length;t<e;t++){BX.bind(n.nodes[t],"click",(function(t){BX.Landing.PaymentAlertShow(n);BX.PreventDefault(t)}))}};BX.Landing.PaymentAlertShow=function(n){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();var e=t.show({title:n.title?n.title:BX.message("LANDING_TPL_JS_PAY_TARIFF_TITLE"),content:'<div class="landing-payrate-popup-content"><span class="landing-payrate-popup-text">'+n.message+"</span></div>",confirm:BX.message("LANDING_TPL_JS_PAY_TARIFF"),contentColor:"grey",type:n.type||null});e.then((function(){top.window.location.href="/bitrix/tools/landing/ajax.php?redirect=upgrade"}),(function(){}))};BX.Landing.AlertShow=function(n){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();var e=t.show({title:n.title?n.title:null,content:n.message,contentColor:"grey",type:n.type||null});e.then((function(){top.window.location.href="/bitrix/tools/landing/ajax.php?redirect=upgrade"}),(function(){}))};BX.ready((function(){var n=document.querySelectorAll(".bitrix24-metrika");if(!n){return}if(typeof BX.Landing.Metrika==="undefined"){return}var t=new BX.Landing.Metrika(true);for(var e=0,i=n.length;e<i;e++){BX.bind(n[e],"click",function(n){t.sendLabel(null,BX.data(this,"metrika24"),BX.data(this,"metrika24value"))}.bind(n[e]))}}))})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:95:"/bitrix/components/bitrix/landing.demo_preview/templates/.default/script.min.js?169530207513506";s:6:"source";s:75:"/bitrix/components/bitrix/landing.demo_preview/templates/.default/script.js";s:3:"min";s:79:"/bitrix/components/bitrix/landing.demo_preview/templates/.default/script.min.js";s:3:"map";s:79:"/bitrix/components/bitrix/landing.demo_preview/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.slice;var t=BX.Landing.Utils.proxy;var i=BX.Landing.Utils.bind;var r=BX.Landing.Utils.addClass;var a=BX.Landing.Utils.removeClass;var o=BX.Landing.Utils.isNumber;var s=BX.Landing.Utils.style;var n=BX.Landing.Utils.data;var l=BX.Landing.Utils.addQueryParams;BX.Landing.TemplatePreview=function(e){this.closeButton=document.querySelector(".landing-template-preview-close");this.createButton=document.querySelector(".landing-template-preview-create");this.createByImportButton=document.querySelector(".landing-template-preview-create-by-import");this.title=document.querySelector(".landing-template-preview-input-title");this.description=document.querySelector(".landing-template-preview-input-description");this.themesPalette=document.querySelector(".landing-template-preview-themes");this.themesSiteColorNode=document.querySelector(".landing-template-preview-site-color");this.themesSiteCustomColorNode=document.querySelector(".landing-demo-preview-custom-color");this.imageContainer=document.querySelector(".preview-desktop-body-image");this.loaderContainer=document.querySelector(".preview-desktop-body-loader-container");this.previewFrame=document.querySelector(".preview-desktop-body-preview-frame");this.baseUrlNode=document.querySelector(".landing-template-preview-base-url");this.siteGroupPalette=document.querySelector(".landing-template-preview-site-group");this.loader=new BX.Loader({});this.messages=e.messages||{};this.loaderText=null;this.progressBar=null;this.IsLoadedFrame=false;this.baseUrl="";this.color=null;this.ajaxUrl="";this.ajaxParams={};this.createStore=BX.type.isBoolean(e.createStore)?e.createStore:false;this.disableStoreRedirect=BX.type.isBoolean(e.disableStoreRedirect)?e.disableStoreRedirect:false;this.disableClickHandler=BX.type.isBoolean(e.disableClickHandler)?e.disableClickHandler:false;this.adminSection=BX.type.isBoolean(e.adminSection)?e.adminSection:null;this.zipInstallPath=e.zipInstallPath?e.zipInstallPath:null;this.siteId=e.siteId||0;this.langId=BX.type.isString(e.langId)?e.langId:"";this.folderId=e.folderId||0;this.urlPreview=e.urlPreview||"";this.onCreateButtonClick=t(this.onCreateButtonClick,this);this.onCancelButtonClick=t(this.onCancelButtonClick,this);this.onColorPickerThemeSelect=t(this.onColorPickerThemeSelect,this);this.onFrameLoad=t(this.onFrameLoad,this);BX.addCustomEvent("BX.Landing.ColorPickerTheme:onSelectColor",this.onColorPickerThemeSelect);this.init();return this};BX.Landing.TemplatePreview.getInstance=function(e){return BX.Landing.TemplatePreview.instance||(BX.Landing.TemplatePreview.instance=new BX.Landing.TemplatePreview(e))};BX.Landing.TemplatePreview.prototype={init:function(){var t=e(this.themesPalette.children);if(this.themesSiteColorNode){t=t.concat(e(this.themesSiteColorNode.children))}if(this.themesSiteCustomColorNode){t=t.concat(e(this.themesSiteCustomColorNode.children))}t.forEach(this.initSelectableItem,this);if(this.siteGroupPalette){var r=e(this.siteGroupPalette.children);r.forEach(this.initSelectableItem,this)}i(this.previewFrame,"load",this.onFrameLoad);i(this.closeButton,"click",this.onCancelButtonClick);if(!this.disableClickHandler){i(this.createButton,"click",this.onCreateButtonClick)}this.setBaseUrl();this.setDefaultColor();this.showPreview();this.buildHeader();if(BX.SidePanel.Instance.isReload===true){this.createButton.click()}},setBaseUrl:function(e){if(e===undefined){this.baseUrl=n(this.baseUrlNode,"data-base-url")}else{this.baseUrl=e}},setColor:function(e){if(e!==undefined){this.color=e}},setDefaultColor:function(){if(this.getActiveColorNode()){this.color=n(this.getActiveColorNode(),"data-value")}},getColor:function(){return this.color},createPreviewUrl:function(){var e={};if(!this.baseUrl){this.setBaseUrl()}if(this.getColor()){e={color:this.getColor()}}return l(this.baseUrl,e)},onFrameLoad:function(){if(this.createStore){new BX.Landing.SaveBtn(document.querySelector(".landing-template-preview-create"))}this.IsLoadedFrame=true},getActiveColorNode:function(){var e=this.themesPalette.querySelector(".active");if(!e&&this.themesSiteColorNode){e=this.themesSiteColorNode.querySelector(".active")}if(!e&&this.themesSiteCustomColorNode){e=this.themesSiteCustomColorNode.querySelector(".active")}return e},getActiveSiteGroupItem:function(){return this.siteGroupPalette.querySelector(".active")},showPreview:function(e){if(e===undefined){e=this.createPreviewUrl()}return this.showLoader().then(this.createFrameIfNeeded()).then(this.loadPreview(e)).then(this.hideLoader())},buildHeader:function(){var e=BX.create("div");new QRCode(e,{text:this.urlPreview,width:156,height:156,colorLight:"transparent"});this.showPopupButton=document.querySelector(".mobile-view");if(this.showPopupButton){var t=BX.PopupWindowManager.create("landing-popup-preview",this.showPopupButton,{content:BX.create("div",{props:{className:"landing-popup-preview-content"},children:[BX.create("div",{props:{className:"landing-popup-preview-title"},text:this.messages.LANDING_TPL_POPUP_TITLE}),BX.create("div",{props:{className:"landing-popup-preview-qr"},children:[e]}),BX.create("div",{props:{className:"landing-popup-preview-text"},text:this.messages.LANDING_TPL_POPUP_TEXT})]}),closeIcon:true,closeByEsc:true,noAllPaddings:true,autoHide:true,animation:"fading-slide",angle:{position:"top",offset:75},minWidth:375,maxWidth:375,contentBackground:"transparent"});this.showPopupButton.addEventListener("click",(function(){t.toggle()}))}},createFrameIfNeeded:function(){return function(){return new Promise(function(e){var t=function(){if(!this.previewFrame){this.previewFrame=BX.create("iframe",{props:{className:"preview-desktop-body-preview-frame"}});this.imageContainer.appendChild(this.previewFrame);i(this.previewFrame,"load",this.onFrameLoad)}if(!this.previewFrame.style.width){void s(this.previewFrame,{width:"100%",height:"calc(100vh - 69px)",border:"none"})}e(this.previewFrame)}.bind(this);if(document.readyState!=="complete"){BX.bind(window,"load",t.bind(this))}else{t()}}.bind(this))}.bind(this)},loadPreview:function(e){return function(){return new Promise(function(t){if(this.previewFrame.src!==e){this.previewFrame.src=e;this.previewFrame.onload=function(){t(this.previewFrame)}.bind(this);return}t(this.previewFrame)}.bind(this))}.bind(this)},showLoader:function(){return new Promise(function(e){void this.loader.show(this.loaderContainer);r(this.imageContainer,"landing-template-preview-overlay");e()}.bind(this))},hideLoader:function(){return function(e){return new Promise(function(t){void this.loader.hide();a(this.imageContainer,"landing-template-preview-overlay");t(e)}.bind(this))}.bind(this)},delay:function(e){e=o(e)?e:0;return function(t){return new Promise((function(i){setTimeout(i.bind(null,t),e)}))}},getValue:function(){var e={};if(this.getActiveColorNode()){if(this.themesSiteColorNode&&this.getActiveColorNode().parentElement===this.themesSiteColorNode){e[this.themesSiteColorNode.dataset.name]=this.getActiveColorNode().dataset.value}if(this.siteGroupPalette){e[this.siteGroupPalette.dataset.name]=this.getActiveSiteGroupItem().dataset.value}e[this.themesPalette.dataset.name]=this.getActiveColorNode().dataset.value;if(this.themesSiteCustomColorNode){e[this.themesPalette.dataset.name]=this.getActiveColorNode().dataset.value}}e[this.title.dataset.name]=this.title.value.replaceAll("&","").replaceAll("?","");e[this.description.dataset.name]=this.description.value;return e},getCreateUrl:function(){return l(this.createButton.getAttribute("href"),this.getValue())},onCancelButtonClick:function(e){e.preventDefault();top.BX.SidePanel.Instance.close()},onCreateButtonClick:function(e){e.preventDefault();if(BX.Dom.hasClass(this.createButton.parentNode,"needed-market-subscription")){top.BX.UI.InfoHelper.show("limit_subscription_market_templates");const e=new Promise(function(e){setInterval((()=>{if(BX.Dom.hasClass(this.createButton,"ui-btn-clock")){e()}}),500)}.bind(this));e.then((()=>{BX.Dom.removeClass(this.createButton,"ui-btn-clock");BX.Dom.attr(this.createButton,"style","")}));return}const t=new BX.Landing.Metrika(true);t.sendLabel(null,"createTemplate",e.target.href);if(this.isStore()&&this.IsLoadedFrame){this.loaderText=BX.create("div",{props:{className:"landing-template-preview-loader-text"},text:this.messages.LANDING_LOADER_WAIT});this.progressBar=new BX.UI.ProgressBar({column:true});this.progressBar.getContainer().classList.add("ui-progressbar-landing-preview");this.loaderContainer.appendChild(this.loaderText);this.loaderContainer.appendChild(this.progressBar.getContainer())}if(this.isStore()){if(this.IsLoadedFrame){this.showLoader().then((()=>{this.initCatalogParams();this.createCatalog()}))}}else if(this.zipInstallPath){this.finalRedirectAjax(this.getCreateUrl())}else{this.showLoader().then(this.delay(200)).then(function(){this.finalRedirectAjax(this.getCreateUrl())}.bind(this))}},initCatalogParams:function(){if(this.createButton.hasAttribute("data-href")){this.ajaxUrl=this.createButton.getAttribute("data-href")}this.ajaxParams=this.getValue();this.ajaxParams["start"]="Y";this.ajaxParams["showcaseId"]="clothes"},createCatalog:function(){if(this.ajaxUrl===""){this.hideLoader();return}BX.ajax({method:"POST",dataType:"json",url:this.ajaxUrl,data:BX.ajax.prepareData(this.ajaxParams),onsuccess:BX.proxy(this.createCatalogResult,this)})},createCatalogResult:function(e){if(e.status==="continue"){this.ajaxParams["start"]="N";this.progressBar.update(e.progress);this.progressBar.setTextAfter(e.message);this.createCatalog()}else{this.finalRedirectAjax(e.url)}},finalRedirectAjax:function(e){if(this.zipInstallPath){let t=[];const i=this.getValue();for(let e in i){t["additional["+e+"]"]=i[e]}t["additional[siteId]"]=this.siteId;t["additional[folderId]"]=this.folderId;t["from"]=this.createParamsStrFromUrl(e);if(this.adminSection&&this.langId!==""){t["lang"]=this.langId}if(typeof top.BX.SidePanel!=="undefined"){const e=document.querySelector(".landing-popup-import");const i=document.querySelector(".landing-popup-import-loader");const r=document.querySelector(".preview-left");if(r&&i){this.loader.show(i);BX.Dom.addClass(r,"landing-import-start")}t["inSlider"]="N";if(this.siteId!==0){t["createType"]="PAGE"}let a;BX.ajax({method:"POST",dataType:"html",url:l(this.zipInstallPath,t),onsuccess:t=>{const r=new Promise(((i,r)=>{const o=BX.Dom.create("div",{html:t});BX.Dom.style(o,"display","none");e.append(o);let s;let n=0;a=setInterval((()=>{if(n>100){r(new Error("Time is up"))}s=o.querySelector(".rest-configuration-wrapper");if(s!==null){i(s)}n++}),300)}));r.then((t=>{clearInterval(a);if(BX.Dom.hasClass(t,"rest-configuration-wrapper")){const r=t.querySelector(".rest-configuration-title");const a=t.querySelector(".rest-configuration-start-icon-main-container");if(r&&a){BX.Dom.remove(r);BX.Dom.insertBefore(r,a.nextSibling)}this.loader.hide();BX.Dom.append(t,e);BX.Dom.style(i,"display","none")}}),(e=>{clearInterval(a);this.addRepeatCreateButton()}))}})}}else if(this.disableStoreRedirect){BX.ajax({method:"POST",dataType:"html",url:e,onsuccess:function(){if(typeof top.BX.SidePanel!=="undefined"){setTimeout((function(){top.BX.onCustomEvent("Landing:onDemoCreateStart");top.BX.SidePanel.Instance.close()}),100)}}})}else{window.location=e}},addRepeatCreateButton:function(){const e=document.querySelector(".landing-popup-import-repeat");if(e){BX.Dom.removeClass(e,"hide")}const t=document.querySelector(".landing-popup-import-repeat-button");if(t){i(t,"click",this.onRepeatButtonClick)}},onRepeatButtonClick:function(){const e=document.querySelector(".landing-popup-import-repeat");if(e){BX.Dom.addClass(e,"hide")}const t=document.querySelector(".landing-template-preview-create");if(t){t.click()}},initSelectableItem:function(e){i(e,"click",t(this.onSelectableItemClick,this))},onSelectableItemClick:function(e){e.preventDefault();if(e.currentTarget.parentElement===this.themesPalette||this.themesSiteColorNode&&e.currentTarget.parentElement===this.themesSiteColorNode){if(this.getActiveColorNode()){this.getActiveColorNode().classList.remove("active")}r(e.currentTarget,"active");this.setColor(n(e.currentTarget,"data-value"));this.showPreview()}if(e.currentTarget.parentElement===this.siteGroupPalette){a(this.getActiveSiteGroupItem(),"active");r(e.currentTarget,"active");this.setBaseUrl(n(e.currentTarget,"data-base-url"));this.showPreview()}},isStore:function(){return this.createStore},onColorPickerThemeSelect:function(e){[this.themesPalette,this.themesSiteCustomColorNode,this.themesSiteColorNode].forEach((function(e){if(e){BX.removeClass(e.querySelector(".active"),"active")}}));e.data.node.classList.add("active");var t=new BX.Loader({});var i=document.querySelector(".preview-desktop-body-loader-container");t.show(i);var o=document.querySelector(".preview-desktop-body-image");r(o,"landing-template-preview-overlay");var s=document.querySelector(".preview-desktop-body-preview-frame");if(s){var n=new URL(s.getAttribute("src"));var l=new URLSearchParams(n.search);l.set("color",e.data.color.substr(1));n.search=l.toString();s.setAttribute("src",n.toString());setTimeout(d,1600)}function d(){t.hide();a(o,"landing-template-preview-overlay")}},createParamsStrFromUrl(e){var t=e.match(/&app_code=[^&]+/i);var i="";if(t!==null){i=t[0].substr(10)}var r=e.match(/&title=[^&]+/iu);var a="";if(r!==null){a=r[0].substr(7)}var o=e.match(/&preview_id=[^&]+/i);var s="";if(o!==null){s=o[0].substr(12)}return"|"+i+"|"+a+"|"+s}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js?169530207519151";s:6:"source";s:79:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.js";s:3:"min";s:83:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js";s:3:"map";s:83:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");const e=BX.Landing.Utils.slice;const t=BX.Landing.Utils.proxy;const i=BX.Landing.Utils.bind;const n=BX.Landing.Utils.addClass;const o=BX.Landing.Utils.removeClass;const s=BX.Landing.Utils.isNumber;const l=BX.Landing.Utils.data;const a=BX.Landing.Utils.onTransitionEnd;BX.Landing.EditTitleForm=function(e,t,i,n){this.btn=e.querySelector(".ui-title-input-btn-js");this.label=e.querySelector(".landing-editable-field-label-js");this.input=e.querySelector(".landing-editable-field-input-js");this.additionalWidth=t||0;this.input.IsWidthSet=false;this.display=n;this.hideInput=this.hideInput.bind(this);this.showInput=this.showInput.bind(this);if(i){BX.bind(e,"click",this.showInput)}else{BX.bind(this.btn,"click",this.showInput)}this.input.setAttribute("data-height",this.label.offsetHeight)};BX.Landing.EditTitleForm.prototype={showInput:function(e){e.stopPropagation();if(!this.input.IsWidthSet){this.input.style.width=this.label.offsetWidth+this.additionalWidth+17+"px"}if(this.input.tagName==="TEXTAREA"){this.input.style.height=this.input.getAttribute("data-height")+"px"}this.label.style.display="none";this.btn.style.display="none";this.input.style.display="block";this.input.focus();if(!BX.Dom.hasClass(this.input,"landing-editable-field-input-js-init")){this.input.selectionStart=this.input.value.length;BX.Dom.addClass(this.input,"landing-editable-field-input-js-init")}this.input.IsWidthSet=true;BX.bind(document,"mousedown",this.hideInput)},hideInput:function(e){if(e.target===this.input)return;this.label.textContent=this.input.value;if(this.display){this.label.style.display="inline-block"}else{this.label.style.display="inline"}this.input.style.display="none";this.btn.style.display="inline-block";this.input.IsWidthSet=false;this.input.setAttribute("data-height",this.label.offsetHeight);BX.unbind(document,"mousedown",this.hideInput)}};BX.Landing.FieldLengthLimited=function(e){e.forEach((function(e){BX.bind(e.field,"keyup",(function(){if(e.length){if(e.field.value.length<=e.length){e.node.textContent=e.field.value}else{e.node.textContent=e.field.value.substring(0,e.length)}}else{e.node.textContent=e.field.value}}))}))};BX.Landing.Favicon=function(){const e=BX("landing-form-favicon-change");const t=BX("landing-form-favicon-input");const i=BX("landing-form-favicon-value");const n=BX("landing-form-favicon-form");const o=BX("landing-form-favicon-src");const s=BX("landing-form-favicon-error");if(!n||!t||!e){return}BX.bind(e,"click",(function(e){BX.fireEvent(t,"click");BX.PreventDefault(e)}));BX.bind(t,"change",(function(e){BX.ajax.submitAjax(n,{method:"POST",dataType:"json",onsuccess:function(e){if(e.type==="success"&&typeof e.result!=="undefined"&&e.result!==false){i.value=e.result.id;o.setAttribute("src",e.result.src)}else{s.style.color="red"}}});BX.PreventDefault(e)}))};BX.Landing.Custom404And503=function(e,t){BX.bind(e,"change",(e=>{if(e.currentTarget.value===""){t.checked=false;t.click()}else{t.checked=true}}));BX.addCustomEvent("BX.UI.LayoutForm:onToggle",(i=>{if(i.getData().checkbox&&i.getData().checkbox===t){if(!i.getData().checkbox.checked){e.value=""}}}))};BX.Landing.Copyright=function(e,t){BX.bind(t,"change",(function(){let t=e.getAttribute("action");t=t.replace(/&feature_copyright=[YN]/,"");t+="&feature_copyright="+(this.checked?"Y":"N");e.setAttribute("action",t)}))};BX.Landing.Access=function(e){BX.Landing.Access.selected=e.selected;this.table=e.table;const t="RIGHTS";const i=e.form;const n=e.select;let o=e.inc;BX.Access.Init({other:{disabled_cr:true}});BX.Access.SetSelected(BX.Landing.Access.selected,t);function s(){BX.Access.ShowForm({callback:e=>{for(let i in e){if(e.hasOwnProperty(i)){for(let s in e[i]){if(e[i].hasOwnProperty(s)){let l=this.table.rows.length;let a=this.table.insertRow(l-1);a.classList.add("landing-form-rights");BX.Landing.Access.selected[s]=true;a.insertCell(-1);a.insertCell(-1);a.cells[0].innerHTML=BX.Access.GetProviderName(i)+" "+BX.util.htmlspecialchars(e[i][s].name)+":"+'<input type="hidden" name="fields['+t+"][ACCESS_CODE]["+o+']" value="'+s+'">';a.cells[0].classList.add("landing-form-rights-right");a.cells[1].classList.add("landing-form-rights-left");a.cells[1].innerHTML=n.replace("#inc#",o)+' <a href="javascript:void(0);" onclick="BX.Landing.Access.onRowDelete(this);"'+' data-id="'+s+'" class="landing-form-rights-delete"></a>';o++}}}}},bind:t})}i.addEventListener("click",s.bind(this))};BX.Landing.Access.selected=[];BX.Landing.Access.onRowDelete=function(e){BX.Landing.Access.selected[BX.data(BX(e),"id")]=false;BX.remove(BX.findParent(BX(e),{tag:"tr"},true))};BX.Landing.Layout=function(e){this.params=e;this.params.messages=this.params.messages||{};this.container=this.params.container;this.areas=[];const t=[].slice.call(this.container.querySelectorAll(".landing-form-layout-item"));t.forEach((e=>{e.addEventListener("click",this.handleLayoutClick.bind(this))}));this.createBlocks(t[0].dataset.block);if(typeof this.params.areasCount!=="undefined"){this.changeLayout(this.params.areasCount,this.params.current)}const i=this.container.querySelector(".landing-form-select-buttons");i.addEventListener("click",this.handlerOnArrowClick.bind(this));if(this.params.tplUse){this.useCheck=this.params.tplUse;this.inputs=this.container.querySelectorAll(".layout-switcher");BX.addCustomEvent("BX.UI.LayoutForm:onToggle",(e=>{if(e.getData().checkbox&&e.getData().checkbox===this.useCheck){this.container.classList.add("landing-form-page-layout-short");this.inputs.forEach((e=>{e.checked=false}))}}))}};BX.Landing.Layout.prototype={handlerOnArrowClick:function(e){const t=this.container.querySelector(".landing-form-list-inner");if(e.target.classList.contains("landing-form-select-next")){t.classList.add("--prev")}else{t.classList.remove("--prev")}},createBlocks:function(e){const t=this.params.tplRefs.value.split(",");this.areas=[];const i=this.container.querySelector(".landing-form-layout-block-container");i.innerHTML="";for(let n=0;n<e;n++){const e=BX.create("div",{attrs:{className:"landing-form-layout-block-item"}});let o=n+1;let s="";if(typeof t[n]!=="undefined"&&t[n].indexOf(":")!==-1){s=parseInt(t[n].split(":")[1]);if(s>0){s="#landing"+s}else{s=""}}const l=new BX.Landing.UI.Field.LinkUrl({title:this.params.messages.area+" #"+o,content:s,textOnly:true,disableCustomURL:true,disableBlocks:true,disallowType:true,enableAreas:true,allowedTypes:[BX.Landing.UI.Field.LinkUrl.TYPE_PAGE],typeData:{button:{className:"fa fa-chevron-right",text:"",action:BX.Landing.UI.Field.LinkUrl.TYPE_PAGE},hideInput:false,contentEditable:false},settingMode:true,options:{siteId:this.params.siteId,landingId:this.params.landingId,filter:{"=TYPE":this.params.type}},onInit:this.rebuildHiddenField.bind(this),onInput:this.rebuildHiddenField.bind(this),onValueChange:this.rebuildHiddenField.bind(this)});this.areas[n]=l;e.appendChild(l.layout);i.appendChild(e)}},rebuildHiddenField:function(){let e="";for(let t=0,i=this.areas.length;t<i;t++){e+=t+1+":"+(this.areas[t].getValue()?this.areas[t].getValue().substr(13):0)+","}this.params.tplRefs.value=e},handleLayoutClick:function(e){const t=e.target.parentNode;const i=this.container.querySelector(".landing-form-layout-item-selected");if(i){i.classList.remove("landing-form-layout-item-selected")}this.changeLayout(t.dataset.block,t.dataset.layout)},changeLayout:function(e,t){const i=this.container.querySelector(".landing-form-layout-detail");this.container.classList.remove("landing-form-page-layout-short");i.classList.remove("landing-form-layout-detail-hidden");this.createBlocks(e);if(typeof t!=="undefined"){this.changeLayoutImg(t)}this.params.tplRefs.value=""},changeLayoutImg:function(e){const t=this.container.querySelectorAll(".landing-form-layout-img");for(let i=0;i<t.length;i++){if(t[i].dataset.layout===e){t[i].style.display="block"}else{t[i].style.display="none"}}}};BX.Landing.ToggleAdditionalFields=function(e){this.isOpen=false;this.form=e;this.hiddenRows=BX.convert.nodeListToArray(this.form.querySelectorAll(BX.Landing.ToggleAdditionalFields.SELECTOR_ROWS));this.toggleContainer=this.form.querySelector(BX.Landing.ToggleAdditionalFields.SELECTOR_CONTAINER);BX.Event.bind(this.toggleContainer,"click",this.onToggleClick.bind(this));if(window.location.hash){const e=window.location.hash.substr(1);this.hiddenRows.forEach((t=>{const i=t.dataset[BX.Landing.ToggleAdditionalFields.DATA_ROW_OPTION];if(i&&i===e){this.highlightHiddenRow(t)}}));const t=this.form.querySelector("["+BX.Landing.ToggleAdditionalFields.DATA_MAIN_OPTION_NAME+'="'+e+'"]');if(t){this.highlightRow(t)}}};BX.Landing.ToggleAdditionalFields.SELECTOR_ROWS=".landing-form-additional-row";BX.Landing.ToggleAdditionalFields.SELECTOR_CONTAINER=".landing-form-additional-fields-js";BX.Landing.ToggleAdditionalFields.DATA_OPTION="landingAdditionalOption";BX.Landing.ToggleAdditionalFields.DATA_ROW_OPTION="landingAdditionalDetail";BX.Landing.ToggleAdditionalFields.DATA_ROW_OPTION_NAME="data-landing-additional-detail";BX.Landing.ToggleAdditionalFields.DATA_MAIN_OPTION_NAME="data-landing-main-option";BX.Landing.ToggleAdditionalFields.CLASS_HIGHLIGHT="landing-form-row-highlight";BX.Landing.ToggleAdditionalFields.prototype={onToggleClick:function(e){if(e.target.dataset[BX.Landing.ToggleAdditionalFields.DATA_OPTION]){this.onHeaderClick(e)}else{this.toggleRows()}},toggleRows:function(){return this.isOpen?this.hideRows():this.showRows()},hideRows:function(){const e=[];this.hiddenRows.forEach((t=>{if(t.scrollHeight>0){t.style.height=0;e.push(a(t))}}));BX.Dom.removeClass(this.form,"landing-form-additional-open");this.isOpen=false;return Promise.all(e)},showRows:function(){const e=[];this.hiddenRows.forEach((t=>{if(t.scrollHeight>0){t.style.height="auto";e.push(a(t))}}));BX.Dom.addClass(this.form,"landing-form-additional-open");this.isOpen=true;return Promise.all(e)},onHeaderClick:function(e){const t=e.target.dataset[BX.Landing.ToggleAdditionalFields.DATA_OPTION];if(t){const e="["+BX.Landing.ToggleAdditionalFields.DATA_ROW_OPTION_NAME+' = "'+t+'"]';const i=this.form.querySelector(e);if(i){this.highlightHiddenRow(i)}}},highlightHiddenRow:function(e){const t=this.isOpen?Promise.resolve():this.showRows();t.then((()=>{this.highlightRow(e)}))},highlightRow:function(e){BX.Dom.addClass(e,BX.Landing.ToggleAdditionalFields.CLASS_HIGHLIGHT);window.scrollTo({top:BX.pos(e).top,behavior:"smooth"});setTimeout((()=>{BX.Dom.removeClass(e,BX.Landing.ToggleAdditionalFields.CLASS_HIGHLIGHT)}),2500)}};BX.Landing.ExternalMetrika=function(e,t,i){if(e.value===""){t.disabled=true;i.disabled=true}e.addEventListener("input",n.bind(this));function n(){if(e.value===""){t.disabled=true;t.checked=false;i.disabled=true;i.checked=false}else{t.disabled=false;i.disabled=false}}};BX.Landing.SaveBtn=function(e){e.addEventListener("click",t.bind(this));function t(){e.classList.add("ui-btn-clock");e.style.cursor="default";e.style.pointerEvents="none"}};BX.Landing.Cookies=function(){this.bgPickerBtn=document.querySelector(".landing-form-cookies-color-bg");this.textPickerBtn=document.querySelector(".landing-form-cookies-color-text");this.simplePreview=document.querySelector(".landing-form-cookies-settings-type-simple");this.advancedPreview=document.querySelector(".landing-form-cookies-settings-type-advanced");this.positions=document.querySelectorAll(".landing-form-cookies-position-item");this.inputApp=document.querySelector("#radio-cookies-mode-A");this.inputInfo=document.querySelector("#radio-cookies-mode-I");this.settings=document.querySelector(".landing-form-cookies-settings-wrapper");this.bgPicker=new BX.ColorPicker({bindElement:this.bgPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onBgColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.textPicker=new BX.ColorPicker({bindElement:this.textPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onTextColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.setSelectedBgColor(this.bgPickerBtn.value);this.setSelectedTextColor(this.textPickerBtn.value);this.hideCookiesSettings();this.bindEvents()};BX.Landing.Cookies.prototype={bindEvents:function(){this.positions.forEach(function(e){e.addEventListener("click",this.onSelectCookiesPosition.bind(this))}.bind(this));this.bgPickerBtn.addEventListener("click",this.showBgPicker.bind(this));this.textPickerBtn.addEventListener("click",this.showTextPicker.bind(this));this.inputInfo.addEventListener("change",this.hideCookiesSettings.bind(this));this.inputApp.addEventListener("change",this.showCookiesSettings.bind(this))},onBgColorSelected:function(){var e=this.bgPicker.getSelectedColor();this.setSelectedBgColor(e)},onTextColorSelected:function(){var e=this.textPicker.getSelectedColor();this.setSelectedTextColor(e)},onSelectCookiesPosition:function(e){this.positions.forEach(function(e){if(e.classList.contains("landing-form-cookies-position-item-selected")){e.classList.remove("landing-form-cookies-position-item-selected")}}.bind(this));e.currentTarget.classList.add("landing-form-cookies-position-item-selected")},showBgPicker:function(){this.bgPicker.open()},showTextPicker:function(){this.textPicker.open()},setSelectedBgColor:function(e){this.bgPickerBtn.style.background=e;this.bgPickerBtn.value=e;this.simplePreview.style.background=e;this.advancedPreview.style.background=e},setSelectedTextColor:function(e){this.textPickerBtn.style.background=e;this.textPickerBtn.value=e;this.advancedPreview.style.color=e;var t=document.querySelectorAll(".landing-form-cookies-settings-preview-svg");t.forEach((function(t){t.style.fill=e}))},hideCookiesSettings:function(){if(this.inputInfo.checked){this.settings.style.height="0";this.settings.style.opacity="0"}},showCookiesSettings:function(){if(this.inputApp.checked){this.settings.style.height=this.settings.scrollHeight+"px";this.settings.style.opacity="1";a(this.settings).then((()=>{this.settings.height="auto"}))}}};BX.Landing.B24ButtonColor=function(e,t){this.typeSelector=e;this.colorInput=t;this.valueControlWrap=BX.findParent(t,{class:"ui-ctl"});i(e,"change",this.checkVisibility.bind(this));this.checkVisibility()};BX.Landing.B24ButtonColor.prototype={checkVisibility:function(){this.valueControlWrap.hidden=this.typeSelector.value!=="custom";this.colorInput.labels.forEach((e=>{e.hidden=this.typeSelector.value!=="custom"}))}};BX.Landing.NeedPublicationField=function(e){e.forEach((function(e){var t=BX(e);if(t){BX.bind(t,"click",(function(){BX.UI.Dialogs.MessageBox.alert(BX.Loc.getMessage("LANDING_EDIT_NEED_PUBLICATION"))}))}}))};BX.Landing.ColorPalette=function(e,t){this.allColorsNode=e;this.customColorNode=null;this.colorPickerNode=null;if(typeof t!=="undefined"&&t){this.customColorNode=t;this.colorPickerNode=t.querySelector('input[type="text"]')}this.init();return this};BX.Landing.ColorPalette.prototype={init:function(){let t;if(this.allColorsNode){t=e(this.allColorsNode.children)}if(this.customColorNode){t=t.concat([this.customColorNode])}if(t){t.forEach(this.initSelectableItem,this)}if(t){this.setColor()}},setColor:function(e){if(e===undefined){this.color=l(this.getActiveColorNode(),"data-value")}else{this.color=e}if(this.colorPickerNode){this.colorPickerNode.setAttribute("value",this.color)}},getActiveColorNode:function(){let e;if(this.allColorsNode){e=this.allColorsNode.querySelector(".active")}if(!e&&this.customColorNode&&BX.Dom.hasClass(this.customColorNode,"active")){e=this.customColorNode}if(!e&&this.allColorsNode){e=this.allColorsNode.firstElementChild}return e},initSelectableItem:function(e){i(e,"click",t(this.onSelectableItemClick,this))},onSelectableItemClick:function(e){e.preventDefault();if(e.currentTarget.parentElement===this.allColorsNode){if(e.currentTarget.hasAttribute("data-value")){o(this.getActiveColorNode(),"active");n(e.currentTarget,"active");this.setColor(l(e.currentTarget,"data-value"))}}this.currentTarget=e.currentTarget;BX.Event.EventEmitter.subscribe("BX.Landing.ColorPickerTheme:onSelectColor",(()=>{if(this.currentTarget.hasAttribute("data-value")){o(this.getActiveColorNode(),"active");n(this.currentTarget,"active");this.setColor(l(this.currentTarget,"data-value"))}}))}};BX.Landing.ColorPicker=function(e,t){let i;if(t){i=t.defaultColor}this.picker=new BX.ColorPicker({bindElement:e,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onColorSelected.bind(this),colors:this.setColors(),selectedColor:i});this.input=e;this.colorPickerNode=e.parentElement;BX.addClass(this.colorPickerNode,"ui-colorpicker");this.colorIcon=BX.create("span",{props:{className:"ui-colorpicker-color"}});BX.insertBefore(this.colorIcon,this.input);this.colorValue=e.value;if(!this.colorValue&&i){e.value=i;this.colorValue=e.value}if(this.colorValue){BX.adjust(this.colorIcon,{attrs:{style:"background-color:"+this.colorValue}});BX.addClass(this.colorPickerNode,"ui-colorpicker-selected")}this.clearBtn=BX.create("span",{props:{className:"ui-colorpicker-clear"}});BX.insertAfter(this.clearBtn,this.input);BX.bind(this.colorPickerNode,"click",this.show.bind(this));BX.bind(this.clearBtn,"click",this.clear.bind(this))};BX.Landing.ColorPicker.prototype={onColorSelected:function(e){this.colorPickerNode.classList.add("ui-colorpicker-selected");this.colorIcon.style.backgroundColor=e;this.input.value=e;BX.Event.EventEmitter.emit(this,"BX.Landing.ColorPicker:onSelectColor")},show:function(e){if(e.target===this.clearBtn){return}this.picker.open()},clear:function(){this.colorPickerNode.classList.remove("ui-colorpicker-selected");this.input.value="";this.picker.setSelectedColor(null);BX.Event.EventEmitter.emit(this,"BX.Landing.ColorPicker:onClearColorPicker")},setColors:function(){return[["#f5f5f5","#eeeeee","#e0e0e0","#9e9e9e","#757575","#616161","#212121"],["#cfd8dc","#b0bec5","#90a4ae","#607d8b","#546e7a","#455a64","#263238"],["#d7ccc8","#bcaaa4","#a1887f","#795548","#6d4c41","#5d4037","#3e2723"],["#ffccbc","#ffab91","#ff8a65","#ff5722","#f4511e","#e64a19","#bf360c"],["#ffe0b2","#ffcc80","#ffb74d","#ff9800","#fb8c00","#f57c00","#e65100"],["#ffecb3","#ffe082","#ffd54f","#ffc107","#ffb300","#ffa000","#ff6f00"],["#fff9c4","#fff59d","#fff176","#ffeb3b","#fdd835","#fbc02d","#f57f17"],["#f0f4c3","#e6ee9c","#dce775","#cddc39","#c0ca33","#afb42b","#827717"],["#dcedc8","#c5e1a5","#aed581","#8bc34a","#7cb342","#689f38","#33691e"],["#c8e6c9","#a5d6a7","#81c784","#4caf50","#43a047","#388e3c","#1b5e20"],["#b2dfdb","#80cbc4","#4db6ac","#009688","#00897b","#00796b","#004d40"],["#b2ebf2","#80deea","#4dd0e1","#00bcd4","#00acc1","#0097a7","#006064"],["#b3e5fc","#81d4fa","#4fc3f7","#03a9f4","#039be5","#0288d1","#01579b"],["#bbdefb","#90caf9","#64b5f6","#2196f3","#1e88e5","#1976d2","#0d47a1"],["#c5cae9","#9fa8da","#7986cb","#3f51b5","#3949ab","#303f9f","#1a237e"],["#d1c4e9","#b39ddb","#9575cd","#673ab7","#5e35b1","#512da8","#311b92"],["#e1bee7","#ce93d8","#ba68c8","#9c27b0","#8e24aa","#7b1fa2","#4a148c"],["#f8bbd0","#f48fb1","#f06292","#e91e63","#d81b60","#c2185b","#880e4f"],["#ffcdd2","#ef9a9a","#e57373","#f44336","#e53935","#d32f2f","#b71c1c"]].map((function(e,t,i){return i.map((function(e){return e[t]}))}))}}})();
/* End */
;; /* /bitrix/components/bitrix/landing.start/templates/.default/script.min.js?16953020751426*/
; /* /bitrix/components/bitrix/landing.demo_preview/templates/.default/script.min.js?169530207513506*/
; /* /bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js?169530207519151*/

//# sourceMappingURL=template_02cbb4a411a094c58e0ce63502dd7fdd.map.js